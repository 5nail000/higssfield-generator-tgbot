"""
File: config/constants.py
Purpose:
    –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

Responsibilities:
    - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç (—Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –ª–∏–º–∏—Ç—ã)
    - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç (–ª–∏–º–∏—Ç—ã —Ñ–æ—Ç–æ, —Ç–∞–π–º–∞—É—Ç—ã)
    - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

Key Design Decisions:
    - –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
    - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

Notes:
    - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
    - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ config.json –≤ –±—É–¥—É—â–µ–º
"""


# ============================================================================
# –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê: –ö—Ä–µ–¥–∏—Ç—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å
# ============================================================================

# –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–≤ –∫—Ä–µ–¥–∏—Ç–∞—Ö)
GENERATION_CREDIT_COST: float = 50.0

# –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫—Ä–µ–¥–∏—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
INITIAL_USER_CREDITS: float = 10000.0

# –°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
CREDIT_REQUEST_AMOUNT: float = 2500.0


# ============================================================================
# –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –õ–ò–ú–ò–¢–´: –§–∞–π–ª—ã –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
# ============================================================================

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ–∂–∏–º–∞ NanoBanana
MAX_PHOTOS_NANOBANANA: int = 8

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ–∂–∏–º–∞ Seedream 4.5
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 9 –∏–∑-–∑–∞ –ª–∏–º–∏—Ç–∞ Telegram (–Ω–µ –±–æ–ª–µ–µ 9 —Ñ–æ—Ç–æ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏)
MAX_PHOTOS_SEEDREAM: int = 9

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10MB)
# –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ config.json
DEFAULT_MAX_FILE_SIZE: int = 10485760  # 10MB –≤ –±–∞–π—Ç–∞—Ö


# ============================================================================
# API –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# ============================================================================

# –ë–∞–∑–æ–≤—ã–π URL –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Higgsfield
HIGGSFIELD_BASE_URL: str = "https://platform.higgsfield.ai"

# Endpoints –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
ENDPOINT_NANOBANANA_TEXT2IMAGE: str = "/v1/text2image/nano-banana"
ENDPOINT_NANOBANANA_IMAGE2IMAGE: str = "/nano-banana"
ENDPOINT_SEEDREAM: str = "/seedream/v4.5"

# Endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø—Ä–æ—Å–∞
ENDPOINT_REQUEST_STATUS: str = "/requests/{request_id}/status"

# –¢–∞–π–º–∞—É—Ç –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5 –º–∏–Ω—É—Ç)
# –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ config.json
DEFAULT_API_GENERATION_TIMEOUT: int = 300  # —Å–µ–∫—É–Ω–¥—ã

# –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
POLL_INTERVAL_SECONDS: int = 5


# ============================================================================
# –†–ï–ñ–ò–ú–´ –ì–ï–ù–ï–†–ê–¶–ò–ò
# ============================================================================

# –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ä–µ–∂–∏–º–æ–≤
MODE_NANOBANANA: str = "nanobanana"
MODE_SEEDREAM: str = "seedream"

# –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –∏–º–µ–Ω–∞ —Ä–µ–∂–∏–º–æ–≤
MODE_NAME_NANOBANANA: str = "üçå NANOBANANA"
MODE_NAME_SEEDREAM: str = "üé® Seedream 4.5"

# –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∂–∏–º–æ–≤ –∏ –∏—Ö –ª–∏–º–∏—Ç–æ–≤ —Ñ–æ—Ç–æ
MODE_MAX_PHOTOS = {
    MODE_NANOBANANA: MAX_PHOTOS_NANOBANANA,
    MODE_SEEDREAM: MAX_PHOTOS_SEEDREAM,
}

# –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–∞—Ö Higgsfield –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ù–∞–∑–≤–∞–Ω–∏–µ MODEL_COST_USD –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫—Ä–µ–¥–∏—Ç—ã Higgsfield
MODEL_COST_USD = {
    MODE_NANOBANANA: 0.62,  # –∫—Ä–µ–¥–∏—Ç–æ–≤ Higgsfield
    MODE_SEEDREAM: 0.64,    # –∫—Ä–µ–¥–∏—Ç–æ–≤ Higgsfield
}

# –ö—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: 1 USD = X —Ä–µ–∞–ª—å–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤ Higgsfield
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤ USD (–∫—Ä–µ–¥–∏—Ç—ã / –∫—É—Ä—Å = USD)
HIGGSFIELD_CREDITS_PER_USD: float = 16.0


# ============================================================================
# –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
# ============================================================================

def get_max_photos_for_mode(mode: str) -> int:
    """
    –ü–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
    
    Args:
        mode: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞ (MODE_NANOBANANA –∏–ª–∏ MODE_SEEDREAM)
    
    Returns:
        –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ–∂–∏–º–∞
    
    Raises:
        ValueError: –ï—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
    """
    if mode not in MODE_MAX_PHOTOS:
        raise ValueError(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ä–µ–∂–∏–º: {mode}. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–µ–∂–∏–º—ã: {list(MODE_MAX_PHOTOS.keys())}")
    return MODE_MAX_PHOTOS[mode]


def get_mode_display_name(mode: str) -> str:
    """
    –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è —Ä–µ–∂–∏–º–∞.
    
    Args:
        mode: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞
    
    Returns:
        –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è —Ä–µ–∂–∏–º–∞ –∏–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –Ω–∞–π–¥–µ–Ω
    """
    mode_names = {
        MODE_NANOBANANA: MODE_NAME_NANOBANANA,
        MODE_SEEDREAM: MODE_NAME_SEEDREAM,
    }
    return mode_names.get(mode, mode)


def get_model_cost_usd(mode: str) -> float:
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–∞—Ö Higgsfield –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞.
    
    –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫—Ä–µ–¥–∏—Ç—ã Higgsfield.
    
    Args:
        mode: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞ (MODE_NANOBANANA –∏–ª–∏ MODE_SEEDREAM)
    
    Returns:
        –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ –∫—Ä–µ–¥–∏—Ç–∞—Ö Higgsfield –∏–ª–∏ 0.0, –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –Ω–∞–π–¥–µ–Ω
    """
    return MODEL_COST_USD.get(mode, 0.0)


def higgsfield_credits_to_usd(credits: float) -> float:
    """
    –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã Higgsfield –≤ USD –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É.
    
    Args:
        credits: –°—É–º–º–∞ –≤ –∫—Ä–µ–¥–∏—Ç–∞—Ö Higgsfield
    
    Returns:
        –°—É–º–º–∞ –≤ USD
    """
    return credits / HIGGSFIELD_CREDITS_PER_USD
