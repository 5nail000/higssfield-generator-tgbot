{% extends "base.html" %}

{% block title %}–î–∞—à–±–æ—Ä–¥{% endblock %}

{% block content %}
<h1>–î–∞—à–±–æ—Ä–¥</h1>

<div class="card">
    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
        <div>
            <h3>{{ stats.total_users }}</h3>
            <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
        </div>
        <div>
            <h3>{{ "%.2f"|format(stats.total_credits) }}</h3>
            <p>–í—Å–µ–≥–æ –∫—Ä–µ–¥–∏—Ç–æ–≤</p>
        </div>
        <div>
            <h3>{{ stats.recent_actions }}</h3>
            <p>–ü–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π</p>
        </div>
    </div>
</div>

<div class="card">
    <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–¢–∏–ø</th>
                <th>–ö—Ä–µ–¥–∏—Ç—ã</th>
                <th>–í—Ä–µ–º—è</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for action in recent_actions %}
            <tr>
                <td>{{ action.id }}</td>
                <td>{{ action.user_id }}</td>
                <td>{{ action.action_type }}</td>
                <td>{{ "%.2f"|format(action.credits_spent) }}</td>
                <td>{{ action.timestamp.strftime('%d.%m.%Y %H:%M') }}</td>
                <td><a href="{{ url_for('admin.action_details', action_id=action.id) }}" class="btn">–î–µ—Ç–∞–ª–∏</a></td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6">–ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="card">
    <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 1rem;">
        <a href="{{ url_for('admin.users') }}" class="btn btn-primary">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
        <a href="{{ url_for('admin.history') }}" class="btn btn-primary">–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</a>
        <a href="{{ url_for('admin.metrics') }}" class="btn btn-primary">üìä –ú–µ—Ç—Ä–∏–∫–∏</a>
    </div>
    
    <div class="card" style="margin-top: 1rem;">
        <h2>üì® –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</h2>
        <p>–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏" –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üì® –°–æ–æ–±—â–µ–Ω–∏–µ" —Ä—è–¥–æ–º —Å –Ω—É–∂–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.</p>
    </div>
</div>
{% endblock %}
